
# Define Census variables to be retrieved
paper_variables <- c(
  "B01001_001M",
  "B03003_003", "B06011_001E", "B03002_004E", "B03002_012E", "B03002_001E",
  "B01001_003E", "B01001_004E", "B01001_005E", "B01001_006E", "B01001_027E",
  "B01001_028E", "B01001_029E", "B01001_030E", "B01001_001E", "B01001_020E",
  "B01001_021E", "B01001_022E", "B01001_023E", "B01001_024E", "B01001_025E",
  "B01001_044E", "B01001_045E", "B01001_046E", "B01001_047E", "B01001_048E",
  "B01001_049E", "B15002_002E", "B15002_003E", "B15002_004E", "B15002_005E",
  "B15002_006E", "B15002_007E", "B15002_008E", "B15002_009E", "B15002_010E",
  "B15002_011E", "B15002_012E", "B15002_013E", "B15002_014E", "B15002_015E",
  "B15002_016E", "B15002_001E", "C24050_004E", "C24050_002E", "C24050_029E",
  "C24050_001E", "C24050_014E", "B12006_006E", "B12006_011E", "B12006_017E",
  "B12006_022E", "B12006_029E", "B12006_033E", "B12006_039E", "B12006_044E",
  "B12006_050E", "B12006_055E", "B12006_004E", "B12006_009E", "B12006_015E",
  "B12006_020E", "B12006_026E", "B12006_031E", "B12006_037E", "B12006_042E",
  "B12006_048E", "B12006_053E", "B12006_010E", "B12006_008E", "B25011_013E",
  "B25011_037E", "B25011_001E", "B07003_004E", "B07003_007E", "B07003_001E",
  "B17001_002E", "B17001_001E", "B17005_006E", "B17005_011E", "B17005_017E",
  "B17005_022E", "B17005_001E", "B12006_021E", "B01002_001E", "B12006_032E",
  "B12006_043E", "B12006_054E", "B12006_019E", "B12006_030E", "B12006_041E",
  "B12006_052E", "B05001_006E", "B05001_001E", "B26001_001E"
)

# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

# Fetch Census data for counties
paper_data <- get_acs(
  geography = "county",
  variables = paper_variables,
  year = 2021,
  output = "wide",
  geometry = TRUE,
  resolution = "20m",
  shift_geo = TRUE,
  keep_geo_vars = TRUE
)

# Get county geometries with ALAND
counties <- counties(cb = TRUE, year = 2021) %>%
  select(GEOID, NAME, ALAND) %>%
  mutate(FIPS = GEOID) %>%
  select(-NAME,-GEOID) %>%
  st_drop_geometry()

# Connecticut no longer has counties after 2022 ----
